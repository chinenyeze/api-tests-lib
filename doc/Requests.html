<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Perkbox QA Library</title>
    <link rel="icon" type="image/png" href="https://d33e3vv6sjfy9c.cloudfront.net/assets/meta/favicon-white-32x32-ea7672b223119f07d17a6f64b032e3db61c24164ea80267a9c5f82e82eed1aec.png" sizes="32x32">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="container">
    <h1>Perkbox QA Library</h1>
    <small class="menu"><< <a href="Documentation.html#requests">Home menu</a></small>


    <h2>Requests</h2>
    <small>Package: <code>com.perkbox.testbase</code></small>


    <h3>Instance Methods</h3>


    <h4>
        <a name="Requests">public Requests()</a>
        <button onclick="gotoSrc('L26-L36')">src</button>
    </h4>
    <small>
        <i>The Default Constructor: </i> prepares a <i>RestAssured</i> request object used to make a request. Within the constructor, the request is set up to:
        <ul>
            <li>ignore HTTPS Validation, and</li>
            <li>only apply Charset, if it is defined for the request.</li>
        </ul>
    </small>
    <pre>
        Requests req = new Requests();
    </pre>


    <h4>
        <a name="Requests_resourcePath">public Requests(String resourcePath)</a>
        <button onclick="gotoSrc('L38-L40')">src</button>
    </h4>
    <small>
        <i>Constructor: </i> sets the resource path for the request. The resource path for this constructor is relative, e.g. <code>/questions</code>. The base URL (i.e. something similar to <code>http://localhost:8080</code>) is, within the library, obtained from the environment variable <code>BASE_URL</code> (using the library's <a href="Env.html#static_get"><code>Env</code></a>), and prepended to the <code>resourcePath</code> at runtime.
    </small>
    <pre>
        Requests req = new Requests("/questions");
    </pre>


    <h4>
        <a name="Requests_resourcePath_baseUri">public Requests(String resourcePath, String baseUri)</a>
        <button onclick="gotoSrc('L42-L45')">src</button>
    </h4>
    <small>
        <i>Constructor: </i> which also achieves same function as <a href="#Requests_resourcePath"><code>Requests</code></a> constructor, however, requires a <code>baseUri</code>.
    </small>
    <pre>
        Requests req = new Requests("/questions", "http://localhost:8080");
    </pre>


    <h4>
        <a name="withUrl">public Requests withUrl(String url)</a>
        <button onclick="gotoSrc('L47-L50')">src</button>
    </h4>
    <small>
        This method is used to set the URL for the request. It works with the default constructor. Notice that the <code>url</code> is equivalent to the concatenation of the <code>baseUri</code> and <code>resourcePath</code>.
    </small>
    <pre>
        Requests req = (new Requests())
                .withUrl("http://localhost:8080/questions");
    </pre>


    <h4>
        <a name="withHeader">public Requests withHeader(String key, String value)</a>
        <button onclick="gotoSrc('L52-L55')">src</button>
    </h4>
    <small>
        This method is used to add a header of any kind to the request.
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withHeader("Accept-Encoding", "*");
    </pre>


    <h4>
        <a name="withAuthorization">public Requests withAuthorization(String authorization)</a>
        <button onclick="gotoSrc('L57-L60')">src</button>
    </h4>
    <small>
        This method is used to add an Authorization header to the request.
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withAuthorization("eyJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1MTYyMzkwMjJ9.qiaLOGZrWzQCXD5cJLb5ZN0ibZX8GukGOu2AEODwQRY");
    </pre>


    <h4>
        <a name="withContentType">public Requests withContentType(String contentType)</a>
        <button onclick="gotoSrc('L62-L65')">src</button>
    </h4>
    <small>
        This method is used to add a Content-Type header to the request.
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withContentType("application/pdf");
    </pre>


    <h4>
        <a name="withIfMatch">public Requests withIfMatch(String ifMatch)</a>
        <button onclick="gotoSrc('L67-L70')">src</button>
    </h4>
    <small>
        This method is used to add an If-Match header to the request.
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withIfMatch("622e4f5090a588cd7d4f71c08f74d1da");
    </pre>


    <h4>
        <a name="withBody">public Requests withBody(String body)</a>
        <button onclick="gotoSrc('L72-L75')">src</button>
    </h4>
    <small>
        This method is used to add a body to the request.
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withBody("{\"text\": \"What is your name?\"}");
    </pre>
    <small>
        <a href="JsonHelper.html"><code>JsonHelper</code></a> class can also be used to load JSON files into the request body. E.g.:
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"));
    </pre>
    <pre>
        Requests req = (new Requests("/questions"))
                .withBody(JsonHelper.modifyParam("questions/question", "$.text", "What is your favourite colour?"));
    </pre>


    <h4>
        <a name="withQueryParam">public Requests withQueryParam(String key, String value)</a>
        <button onclick="gotoSrc('L77-L80')">src</button>
    </h4>
    <small>
        This method is used to add query parameters to the request. E.g. to make a request with URL format of <code>/questions?enabled=yes&limit=3</code>, the request call will look like below:
    </small>
    <pre>
        Requests req = (new Requests("/questions"))
                .withQueryParam("enabled", "yes")
                .withQueryParam("limit", "3");
    </pre>


    <h4>
        <a name="get">public Responses get(boolean ... logs)</a>
        <button onclick="gotoSrc('L118-L123')">src</button>
    </h4>
    <small>
        This method is used to make a HTTP GET request. <i>Notice:</i> the get method like other action methods (post, put, delete) returns a <a href="Responses.html"><code>Responses</code></a> object.
        E.g. first snippet below lists questions limiting to 3, the second snippet gets a question. Also this method provides logging capability. See <a href="#logging">note on logging</a>.
    </small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withQueryParam("limit", "3")
                .get();
    </pre>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .get();
    </pre>
    <br>
    <small>
        <a name="logging"><b>Logging</b></a>
        <br>The optional <code>logs</code> argument is used to specify <em>request logging</em> (first argument) and <em>response logging</em> (second argument).
        E.g. the first snippet logs only on the request object, the second logs only on the response object, the third snippet logs both request and response.
        <br>Note: Logging is applicable to all the action methods (get, post, put, delete).
    </small>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .get(true);
    </pre>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .get(false, true);
    </pre>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .get(true, true);
    </pre>
    <pre class="sample" data-label="Sample Request Log">
        ::Logging for Request.

        Request method:	GET
        Request URI:	http://localhost:8000/v1/questions/da92995e-3106-479c-b8c5-14df7f907176
        Proxy:          &lt;none&gt;
        Request params: &lt;none&gt;
        Query params:   &lt;none&gt;
        Form params:    &lt;none&gt;
        Path params:    &lt;none&gt;
        Multiparts:     &lt;none&gt;
        Headers:        Authorization=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwZXJrYm94IiwiaWF0IjoxNTMyMzU0NzU3LCJzdWIiOiJiZjRjZWNmOC00MTYxLTExZTctYTkxOS05MmViY2I2N2ZlMzMiLCJleHAiOjE1MzIzNTgzNTcsInVzciI6InBlcmtib3hAbWFpbGluYXRvci5jb20iLCJ0ZW4iOiJ6dWNsYSIsImF1dCI6Ikg0c0lBQUFBQUFBQUFLdFd5c3dyemt6UEtDbFdzcXBXS2l4TkxTN0p6TThEYzdTTFVoTlRnSXhhSUFBQU9GdnpEeWNBQUFBPSJ9.NwfDcbPqGaMxkBCjPD08dWBFkOCSXkaQIr7SOQp7fIc
                        Accept=*/*
                        Content-Type=application/json
        Cookies:        &lt;none&gt;
        Body:           &lt;none&gt;
    </pre>
    <pre class="sample" data-label="Sample Response Log">
        ::Logging for Response.

        HTTP/1.1 200 OK
        Access-Control-Allow-Credentials: true
        Access-Control-Allow-Headers: X-Platform-UUID,X-User-UUID,X-Tenant-UUID,Content-Type,Content-Length,Accept,Authorization,If-Match
        Access-Control-Allow-Methods: POST, GET, PATCH, PUT, DELETE, OPTIONS, TRACE, HEAD
        Access-Control-Allow-Origin: *
        Access-Control-Expose-Headers: Etag
        Cache: Authorization, Origin, Content-Type
        Cache-Control: max-age=0, no-cache, no-store, must-revalidate
        Content-Type: application/json
        Etag: 78440f8208c6e565f71068919078d0bf
        Expires: -1
        Pragma: no-cache
        Date: Mon, 23 Jul 2018 14:32:41 GMT
        Content-Length: 354

        {
            "Etag": "78440f8208c6e565f71068919078d0bf",
            "answers": [
                {
                    "text": "Strongly disagree",
                    "value": 1
                },
                {
                    "text": "Disagree",
                    "value": 2
                }
            ],
            "id": "94d78c11-3054-4170-b020-243253c8c9b0",
            "status": "enabled",
            "text": "My colleagues are aware of problems I am having"
        }
    </pre>


    <h4>
        <a name="post">public Responses post(boolean ... logs)</a>
        <button onclick="gotoSrc('L125-L131')">src</button>
    </h4>
    <small>
        This method is used to make a HTTP POST request. <i>Notice:</i> the post method like other action methods (get, put, delete) returns a <a href="Responses.html"><code>Responses</code></a> object.
        This method uses <code>application/json</code> as default Content-Type.
        Also, this method provides logging capability. See <a href="#logging">note on logging</a>.
    </small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();
    </pre>


    <h4>
        <a name="put">public Responses put(boolean ... logs)</a>
        <button onclick="gotoSrc('L133-L139')">src</button>
    </h4>
    <small>
        This method is used to make a HTTP PUT request. <i>Notice:</i> the put method like other action methods (get, post, delete) returns a <a href="Responses.html"><code>Responses</code></a> object.
        This method uses <code>application/json</code> as default Content-Type.
        Also, this method provides logging capability. See <a href="#logging">note on logging</a>.
    </small>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .withBody(JsonHelper.modifyParam("questions/question", "$.text", "What is your favourite colour?"))
                .put();
    </pre>


    <h4>
        <a name="delete">public Responses delete(boolean ... logs)</a>
        <button onclick="gotoSrc('L141-L146')">src</button>
    </h4>
    <small>
        This method is used to make a HTTP DELETE request. <i>Notice:</i> the delete method like other action methods (get, post, put) returns a <a href="Responses.html"><code>Responses</code></a> object.
        Also, this method provides logging capability. See <a href="#logging">note on logging</a>.
    </small>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .delete();
    </pre>

</div>
<script src="scroller.js"></script>
<script>
function gotoSrc (lines) {
    var url = 'https://github.com/chinenyeze/api-tests-lib/blob/master/src/main/java/com/perkbox/testbase/Requests.java#' + lines;
    var win = window.open(url, '_blank');
    win.focus();
}
</script>
</body>
</html>