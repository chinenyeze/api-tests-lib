<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Perkbox QA Library</title>
    <link rel="icon" type="image/png" href="https://d33e3vv6sjfy9c.cloudfront.net/assets/meta/favicon-white-32x32-ea7672b223119f07d17a6f64b032e3db61c24164ea80267a9c5f82e82eed1aec.png" sizes="32x32">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="container">
    <h1>Perkbox QA Library</h1>
    <small class="menu"><< <a href="Documentation.html#responses">Home menu</a></small>


    <h2>Responses</h2>
    <small>Package: <code>com.perkbox.testbase</code></small>


    <h3>Instance Methods</h3>


    <h4>
        <a name="Responses">public Responses(ExtractableResponse&lt;Response&gt; response)</a>
        <button onclick="gotoSrc('L16-L18')">src</button>
    </h4>
    <small><i>The Constructor: </i> initialises a response using the RestAssured's <code>ExtractableResponse&lt;Response&gt;</code> passed as argument. This constructor is not intended to be called directly, as its purpose is to, within the library, aid the <code>Requests</code> class to retrieve responses from its action methods (<a href="Requests.html#get"><code>get</code></a>, <a href="Requests.html#post"><code>post</code></a>, <a href="Requests.html#put"><code>put</code></a> and <a href="Requests.html#delete"><code>delete</code></a>). E.g.</small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withQueryParam("limit", "3")
                .get();
    </pre>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();
    </pre>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .withBody(JsonHelper.modifyParam("questions/question", "$.text", "What is your favourite colour?"))
                .put();
    </pre>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .delete();
    </pre>


    <h4>
        <a name="assertTrue">public void assertTrue(int statusCode)</a>
        <button onclick="gotoSrc('L20-L22')">src</button>
    </h4>
    <small>This method is used to assert that the status code of the response is same as the <code>statusCode</code> passed as argument.</small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();

        response.assertTrue(201);
    </pre>


    <h4>
        <a name="assertTrue_textResponse">public void assertTrue(int statusCode, String textResponse)</a>
        <button onclick="gotoSrc('L24-L26')">src</button>
    </h4>
    <small>This method fulfills the same function as <code><a href="#assertTrue">public void assertTrue(int statusCode)</a></code>, but further asserts that the response body contains the passed <code>textResponse</code>. E.g. Given a response with body of <em>Sample JSON</em>, the assertion below would pass.</small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();

        response.assertTrue(201, "Item successfully created");
    </pre>
    <pre class="sample">
    Sample JSON:
    ------------
        {
            "message": "Item successfully created."
        }
    </pre>


    <h4>
        <a name="assertTrue_textResponse_log">public void assertTrue(int statusCode, String textResponse, boolean log)</a>
        <button onclick="gotoSrc('L28-L38')">src</button>
    </h4>
    <small>explanation</small>
    <pre>
        snippet
    </pre>


    <h4>
        <a name="assertTrue_fields">public void assertTrue(int statusCode, Map&lt;String, Object&gt; fields)</a>
        <button onclick="gotoSrc('L40-L42')">src</button>
    </h4>
    <small>explanation</small>
    <pre>
        snippet
    </pre>


    <h4>
        <a name="assertTrue_fields_log">public void assertTrue(int statusCode, Map&lt;String, Object&gt; fields, boolean log)</a>
        <button onclick="gotoSrc('L44-L61')">src</button>
    </h4>
    <small>explanation</small>
    <pre>
        snippet
    </pre>


    <h4>
        <a name="assertTrue_mapBuilder">public void assertTrue(int statusCode, MapBuilder mapBuilder)</a>
        <button onclick="gotoSrc('L63-L65')">src</button>
    </h4>
    <small>explanation</small>
    <pre>
        snippet
    </pre>


    <h4>
        <a name="assertTrue_mapBuilder_log">public void assertTrue(int statusCode, MapBuilder mapBuilder, boolean log)</a>
        <button onclick="gotoSrc('L67-L69')">src</button>
    </h4>
    <small>explanation</small>
    <pre>
        snippet
    </pre>


    <h4>
        <a name="assertMatch">public void assertMatch(int statusCode, String expect, String ... regexParams)</a>
        <button onclick="gotoSrc('L71-L96')">src</button>
    </h4>
    <small>explanation</small>
    <pre>
        snippet
    </pre>


    <h4>
        <a name="getHeader">public String getHeader(String headerName)</a>
        <button onclick="gotoSrc('L98-L100')">src</button>
    </h4>
    <small>This method is used to get a header from the response using the <code>headerName</code>. For example the snippet below will return the entity tag of the HTTP response.</small>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .get();

        String etag = response.getHeader("ETag");
    </pre>


    <h4>
        <a name="getParam">public String getParam(String jsonPath)</a>
        <button onclick="gotoSrc('L102-L104')">src</button>
    </h4>
    <small>This method is used to retrieve (as String) the value of a parameter from the json body of a response. The path to the parameter is parsed as a <code>jsonPath</code> argument. E.g. given that the <em>Response JSON</em> below represents the response body, the getParam snippet below will return the String <em>We are moving in the right strategic direction</em>.</small>
    <pre>
        Responses response = (new Requests("/questions/06dcdb79-b391-4891-9ef9-daa12c22ab83"))
                .get();

        String text = response.getParam("$.text");
    </pre>
    <pre class="sample">
    Response JSON:
    --------------
        {
            "id": "06dcdb79-b391-4891-9ef9-daa12c22ab83",
            "text": "We are moving in the right strategic direction"
        }
    </pre>


    <h4>
        <a name="getUuid">public String getUuid()</a>
        <button onclick="gotoSrc('L106-L109')">src</button>
    </h4>
    <small>
        Note: This method (getUuid) is not for getting a uuid parameter from a response body, to do that use the getParam method, e.g. to get a uuid parameter, called <code>id</code>, similar to the example in getParam section, we use <code>response.getParam("$.id").</code>
        <br>This method is used to get uuid from a response which has its body similar to the format in the <em>Sample response</em> below. The <em>Sample response</em> is our recommended response for create item endpoints.
    </small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();

        String uuid = response.getUuid();
    </pre>
    <pre class="sample">
    Sample response:
    ----------------
        {
            "links": {
                "self": "http://localhost:8080/questions/087dbc58-421c-11e7-a919-92ebcb67fe33"
            }
        }
    </pre>


    <h4>
        <a name="getUuid_link">public String getUuid(String link)</a>
        <button onclick="gotoSrc('L111-L113')">src</button>
    </h4>
    <small>This method is used to return uuid from a link passed as argument. The example below would return the uuid <code>087dbc58-421c-11e7-a919-92ebcb67fe33</code>.</small>
    <pre>
        String uuid = response.getUuid("http://localhost:8080/questions/087dbc58-421c-11e7-a919-92ebcb67fe33");
    </pre>


    <h4>
        <a name="getResponse">public ExtractableResponse&lt;Response&gt; getResponse()</a>
        <button onclick="gotoSrc('L115-L117')">src</button>
    </h4>
    <small>This method is used to get an <code>ExtractableResponse&lt;Response&gt;</code> object from a <code>Responses</code> object.</small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();

        ExtractableResponse&lt;Response&gt; exResponse = response.getResponse();
    </pre>


    <h4>
        <a name="log">public void log(String filter)</a>
        <button onclick="gotoSrc('L119-L122')">src</button>
    </h4>
    <small>This method is used to log output on the <code>Responses</code> object. This method prints out the response as string and the status code. The <code>filter</code> argument can be any string which you deem useful to filter the log. The response log example below prints the <em>Sample output</em> below to the console.</small>
    <pre>
        Responses response = (new Requests("/questions"))
                .withBody(JsonHelper.getJson("questions/question"))
                .post();

        response.log("CREATE_VALID_QS");
    </pre>
    <pre class="sample">
    Sample output:
    --------------
        Response::CREATE_VALID_QS:: {"links":{"self":"/v1/questions/ebe3684a-0386-4569-9269-059a52b757c9"}}
        StatusCode::CREATE_VALID_QS:: 201
    </pre>

</div>
<script>
function gotoSrc (lines) {
    var url = 'https://github.com/chinenyeze/api-tests-lib/blob/master/src/main/java/com/perkbox/testbase/Responses.java#' + lines;
    var win = window.open(url, '_blank');
    win.focus();
}
</script>
</body>
</html>